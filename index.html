<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Pong Game</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      color: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow: hidden;
    }
    
    .game-container {
      width: 100%;
      max-width: 800px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    
    .header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
      background: rgba(0, 0, 0, 0.5);
      padding: 15px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }
    
    #scoreboard {
      font-size: 2.5rem;
      font-weight: bold;
      padding: 10px 25px;
      border-radius: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    
    .controls {
      display: flex;
      gap: 15px;
    }
    
    .controls button {
      font-size: 1.1rem;
      padding: 12px 25px;
      border-radius: 50px;
      border: none;
      background: linear-gradient(to right, #4a6eff, #6c8eff);
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      font-weight: bold;
    }
    
    .controls button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
    
    .controls button:active {
      transform: translateY(1px);
    }
    
    #endBtn {
      background: linear-gradient(to right, #ff4754, #ff6b7a);
    }
    
    .canvas-wrapper {
      position: relative;
      width: 100%;
      max-width: 800px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      background: rgba(0, 0, 0, 0.2);
    }
    
    #pong {
      width: 100%;
      height: auto;
      display: block;
      background: rgba(0, 0, 0, 0.7);
    }
    
    .mobile-controls {
      display: none;
      width: 100%;
      max-width: 400px;
      margin-top: 20px;
      gap: 30px;
      justify-content: center;
    }
    
    .mobile-controls button {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(to bottom, #4a6eff, #3a5ee0);
      color: white;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      touch-action: manipulation;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .mobile-controls button:active {
      transform: scale(0.95);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    .instructions {
      margin-top: 15px;
      text-align: center;
      font-size: 1.1rem;
      opacity: 0.9;
      background: rgba(0, 0, 0, 0.3);
      padding: 10px 20px;
      border-radius: 10px;
      max-width: 500px;
    }
    
    .game-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2.2rem;
      text-align: center;
      background: rgba(0, 0, 0, 0.8);
      padding: 25px 50px;
      border-radius: 15px;
      z-index: 10;
      pointer-events: none;
      backdrop-filter: blur(5px);
      border: 2px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    
    /* Media queries for responsiveness */
    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        align-items: center;
      }
      
      #scoreboard {
        font-size: 2rem;
      }
      
      .mobile-controls {
        display: flex;
      }
      
      .instructions {
        font-size: 0.9rem;
      }
      
      .game-message {
        font-size: 1.8rem;
        padding: 15px 30px;
      }
    }
    
    @media (max-width: 400px) {
      .controls button {
        padding: 10px 20px;
        font-size: 1rem;
      }
      
      .mobile-controls button {
        width: 70px;
        height: 70px;
        font-size: 1.7rem;
      }
    }
    
    h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
      text-align: center;
    }
    
    .subtitle {
      font-size: 1.2rem;
      margin-bottom: 30px;
      opacity: 0.9;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>PONG CLASSIC</h1>
  <div class="subtitle">The timeless arcade game reinvented</div>
  
  <div class="game-container">
    <div class="header">
      <div id="scoreboard">
        <span id="score-player">0</span> : <span id="score-computer">0</span>
      </div>
      <div class="controls">
        <button id="startBtn">Start Game</button>
        <button id="endBtn">End Game</button>
      </div>
    </div>
    
    <div class="canvas-wrapper">
      <canvas id="pong"></canvas>
      <div id="gameMessage" class="game-message">Press START to play!</div>
    </div>
    
    <div class="mobile-controls">
      <button id="upBtn">↑</button>
      <button id="downBtn">↓</button>
    </div>
    
    <div class="instructions">
      <p>Use mouse or arrow keys to move your paddle. First to 5 points wins!</p>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('pong');
    const ctx = canvas.getContext('2d');
    const startBtn = document.getElementById('startBtn');
    const endBtn = document.getElementById('endBtn');
    const upBtn = document.getElementById('upBtn');
    const downBtn = document.getElementById('downBtn');
    const gameMessage = document.getElementById('gameMessage');

    // Set initial canvas size based on container
    const canvasWrapper = document.querySelector('.canvas-wrapper');
    let WIDTH = canvasWrapper.clientWidth;
    let HEIGHT = Math.min(WIDTH * 0.6, window.innerHeight * 0.5);
    
    // Paddle settings
    const PADDLE_WIDTH = Math.max(10, WIDTH * 0.012);
    const PADDLE_HEIGHT = Math.max(80, HEIGHT * 0.2);
    const PADDLE_SPEED = 6;

    // Ball settings
    const BALL_SIZE = Math.max(12, WIDTH * 0.015);
    const BALL_SPEED = 5;
    const SCORE_LIMIT = 5;

    // Score
    let scorePlayer = 0;
    let scoreComputer = 0;
    let gameActive = false;
    let animationId;

    // Paddle and ball objects
    const player = { x: 10, y: HEIGHT/2 - PADDLE_HEIGHT/2, dy: 0 };
    const computer = { x: WIDTH - PADDLE_WIDTH - 10, y: HEIGHT/2 - PADDLE_HEIGHT/2, dy: 0 };
    const ball = { x: WIDTH/2 - BALL_SIZE/2, y: HEIGHT/2 - BALL_SIZE/2, dx: BALL_SPEED, dy: BALL_SPEED };

    // Initialize canvas size
    function initCanvasSize() {
      WIDTH = canvasWrapper.clientWidth;
      HEIGHT = Math.min(WIDTH * 0.6, window.innerHeight * 0.5);
      
      canvas.width = WIDTH;
      canvas.height = HEIGHT;
      
      // Adjust paddle and ball positions based on new size
      player.x = 10;
      player.y = HEIGHT/2 - PADDLE_HEIGHT/2;
      
      computer.x = WIDTH - PADDLE_WIDTH - 10;
      computer.y = HEIGHT/2 - PADDLE_HEIGHT/2;
      
      ball.x = WIDTH/2 - BALL_SIZE/2;
      ball.y = HEIGHT/2 - BALL_SIZE/2;
    }

    // Sound helpers using Web Audio API
    function playPing(frequency = 660, duration = 0.08, volume = 0.2) {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = ctx.createOscillator();
        const gain = ctx.createGain();
        oscillator.type = 'sine';
        oscillator.frequency.value = frequency;
        gain.gain.value = volume;
        oscillator.connect(gain);
        gain.connect(ctx.destination);
        oscillator.start();
        oscillator.stop(ctx.currentTime + duration);
        oscillator.onended = () => ctx.close();
      } catch (e) {
        console.log("Audio context not supported");
      }
    }

    function resetBall(direction = 1) {
      ball.x = WIDTH/2 - BALL_SIZE/2;
      ball.y = HEIGHT/2 - BALL_SIZE/2;
      ball.dx = BALL_SPEED * direction;
      ball.dy = BALL_SPEED * (Math.random() > 0.5 ? 1 : -1);
    }

    function drawPaddle(paddle) {
      // Add a subtle gradient effect
      const gradient = ctx.createLinearGradient(paddle.x, paddle.y, paddle.x + PADDLE_WIDTH, paddle.y);
      gradient.addColorStop(0, '#6383ff');
      gradient.addColorStop(1, '#4a6eff');
      ctx.fillStyle = gradient;
      ctx.fillRect(paddle.x, paddle.y, PADDLE_WIDTH, PADDLE_HEIGHT);
      
      // Add inner highlight
      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
      ctx.fillRect(paddle.x, paddle.y, PADDLE_WIDTH/3, PADDLE_HEIGHT);
    }

    function drawBall(ball) {
      ctx.fillStyle = "#fff";
      ctx.beginPath();
      ctx.arc(ball.x + BALL_SIZE/2, ball.y + BALL_SIZE/2, BALL_SIZE/2, 0, Math.PI * 2);
      ctx.fill();
      
      // Add a glow effect to the ball
      ctx.shadowColor = '#4a6eff';
      ctx.shadowBlur = 10;
      ctx.fill();
      ctx.shadowBlur = 0;
    }

    function drawNet() {
      ctx.setLineDash([10, 15]);
      ctx.beginPath();
      ctx.moveTo(WIDTH/2, 0);
      ctx.lineTo(WIDTH/2, HEIGHT);
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.setLineDash([]);
    }

    function draw() {
      // Clear canvas with a dark background
      ctx.fillStyle = "rgba(0, 0, 0, 0.7)";
      ctx.fillRect(0, 0, WIDTH, HEIGHT);
      
      // Draw the net
      drawNet();
      
      // Draw paddles and ball
      drawPaddle(player);
      drawPaddle(computer);
      drawBall(ball);
    }

    function movePaddles() {
      player.y += player.dy;
      if (player.y < 0) player.y = 0;
      if (player.y + PADDLE_HEIGHT > HEIGHT) player.y = HEIGHT - PADDLE_HEIGHT;

      // Computer AI with adjustable difficulty based on screen size
      const difficulty = Math.min(0.9, 0.7 + (WIDTH / 1000));
      let center = computer.y + PADDLE_HEIGHT/2;
      if (center < ball.y - PADDLE_HEIGHT * (1 - difficulty)) {
        computer.dy = PADDLE_SPEED;
      } else if (center > ball.y + PADDLE_HEIGHT * (1 - difficulty)) {
        computer.dy = -PADDLE_SPEED;
      } else {
        computer.dy = 0;
      }
      
      computer.y += computer.dy;
      if (computer.y < 0) computer.y = 0;
      if (computer.y + PADDLE_HEIGHT > HEIGHT) computer.y = HEIGHT - PADDLE_HEIGHT;
    }

    function moveBall() {
      ball.x += ball.dx;
      ball.y += ball.dy;
      
      // Wall collision
      if (ball.y <= 0 || ball.y + BALL_SIZE >= HEIGHT) {
        ball.dy *= -1;
        playPing(330); // Wall bounce sound
      }
      
      // Left paddle
      if (
        ball.x <= player.x + PADDLE_WIDTH &&
        ball.y + BALL_SIZE >= player.y &&
        ball.y <= player.y + PADDLE_HEIGHT
      ) {
        ball.dx = Math.abs(ball.dx);
        // Add some spin based on paddle movement
        ball.dy += player.dy * 0.3;
        playPing(800); // Paddle hit sound
      }
      
      // Right paddle
      if (
        ball.x + BALL_SIZE >= computer.x &&
        ball.y + BALL_SIZE >= computer.y &&
        ball.y <= computer.y + PADDLE_HEIGHT
      ) {
        ball.dx = -Math.abs(ball.dx);
        // Add some spin based on paddle movement
        ball.dy += computer.dy * 0.3;
        playPing(800); // Paddle hit sound
      }
      
      // Score
      if (ball.x < 0) {
        scoreComputer++;
        updateScore();
        playPing(120, 0.3, 0.5); // Score sound
        resetBall(-1);
        if (scoreComputer === SCORE_LIMIT) endGame('Computer wins!');
      }
      
      if (ball.x + BALL_SIZE > WIDTH) {
        scorePlayer++;
        updateScore();
        playPing(440, 0.3, 0.5); // Score sound
        resetBall(1);
        if (scorePlayer === SCORE_LIMIT) endGame('Player wins!');
      }
    }

    function updateScore() {
      document.getElementById('score-player').textContent = scorePlayer;
      document.getElementById('score-computer').textContent = scoreComputer;
    }

    function gameLoop() {
      movePaddles();
      moveBall();
      draw();
      if (gameActive) animationId = requestAnimationFrame(gameLoop);
    }

    function startGame() {
      scorePlayer = 0;
      scoreComputer = 0;
      updateScore();
      resetBall((Math.random() > 0.5 ? 1 : -1));
      player.y = HEIGHT/2 - PADDLE_HEIGHT/2;
      computer.y = HEIGHT/2 - PADDLE_HEIGHT/2;
      gameActive = true;
      gameMessage.style.display = 'none';
      gameLoop();
    }

    function endGame(message = 'Game Over') {
      gameActive = false;
      cancelAnimationFrame(animationId);
      gameMessage.textContent = message;
      gameMessage.style.display = 'block';
    }

    // Event listeners
    startBtn.addEventListener('click', startGame);
    endBtn.addEventListener('click', () => endGame('You ended the game!'));
    
    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (!gameActive) return;
      if (e.key === 'ArrowUp') player.dy = -PADDLE_SPEED;
      if (e.key === 'ArrowDown') player.dy = PADDLE_SPEED;
    });
    
    document.addEventListener('keyup', (e) => {
      if (!gameActive) return;
      if (e.key === 'ArrowUp' || e.key === 'ArrowDown') player.dy = 0;
    });
    
    // Mouse controls
    canvas.addEventListener('mousemove', (e) => {
      if (!gameActive) return;
      const rect = canvas.getBoundingClientRect();
      let mouseY = e.clientY - rect.top;
      player.y = mouseY - PADDLE_HEIGHT/2;
      if (player.y < 0) player.y = 0;
      if (player.y + PADDLE_HEIGHT > HEIGHT) player.y = HEIGHT - PADDLE_HEIGHT;
    });
    
    // Touch controls for mobile
    canvas.addEventListener('touchmove', (e) => {
      if (!gameActive) return;
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      let touchY = e.touches[0].clientY - rect.top;
      player.y = touchY - PADDLE_HEIGHT/2;
      if (player.y < 0) player.y = 0;
      if (player.y + PADDLE_HEIGHT > HEIGHT) player.y = HEIGHT - PADDLE_HEIGHT;
    });
    
    // Mobile button controls
    upBtn.addEventListener('mousedown', () => player.dy = -PADDLE_SPEED);
    upBtn.addEventListener('touchstart', () => player.dy = -PADDLE_SPEED, { passive: true });
    
    downBtn.addEventListener('mousedown', () => player.dy = PADDLE_SPEED);
    downBtn.addEventListener('touchstart', () => player.dy = PADDLE_SPEED, { passive: true });
    
    const stopPaddle = () => player.dy = 0;
    upBtn.addEventListener('mouseup', stopPaddle);
    upBtn.addEventListener('touchend', stopPaddle);
    downBtn.addEventListener('mouseup', stopPaddle);
    downBtn.addEventListener('touchend', stopPaddle);
    
    // Handle window resize
    window.addEventListener('resize', () => {
      initCanvasSize();
      draw();
    });
    
    // Initialize the game
    initCanvasSize();
    draw();
  </script>
</body>
</html>